{"version":3,"file":"index.modern.js","sources":["../src/constants.js","../src/components/DigitalCounter.jsx","../src/components/Scoreboard.jsx","../src/hooks/useLongPress.jsx","../src/components/Cell.jsx","../src/components/MinesweeperGrid.jsx","../src/components/getNewGrid.js","../src/hooks/useTimer.jsx","../src/components/Minesweeper.jsx"],"sourcesContent":["\nexport const gameStatuses = {\n    notStarted: \"notStarted\",\n    running: \"running\",\n    won: \"won\",\n    lost: \"lost\"\n}\n\nexport const levels = [\n    { id: 0, text: \"Beginner\", height: 10, width: 10, minesCount: 10 },\n    { id: 1, text: \"Intermediate\", height: 16, width: 16, minesCount: 44 },\n    { id: 2, text: \"Expert\", height: 30, width: 30, minesCount: 100 },\n]","import React from 'react';\nimport './Scoreboard.component.css';\n\n\nexport function DigitalCounter(props) {\n    const str = \"\" + props.value\n    return (<div className=\"digital-counter\">{str.padStart(3, '0')}</div>);\n}\n\nexport default DigitalCounter;","import React from 'react';\nimport { gameStatuses, levels } from '../constants';\nimport { DigitalCounter } from './DigitalCounter';\n\n\n\nexport function Scoreboard(props) {\n    return (\n        <div className=\"scoreboard\">\n            <DigitalCounter value={props.minesLeft} />\n            <div>\n                <div className=\"select-wrap\">\n                    <select onChange={(e) => props.levelChangeHandler(e.target.value)} value={props.level}>\n                        { levels.map(l => (<option key={l.id} value={l.id}> {l.text} </option>)) }\n                    </select>\n                </div>\n                <GameStatus status={props.gameStatus} onClickHandler={props.resetHandler} isClicking={props.isClicking} />       \n            </div>\n            <DigitalCounter value={props.timer} />\n        </div>\n    );\n}\n\nexport default Scoreboard;\n\nexport function GameStatus(props) {\n    function getStatusEmoji(status) {\n        if (status === gameStatuses.lost) {\n            return 'ðŸ˜ž';\n        } else if (status === gameStatuses.won) {\n            return 'ðŸ˜Ž';\n        } else {\n            return 'ðŸ˜Š'\n        }\n    }\n\n    return (\n        <button className=\"reset\" onClick={props.onClickHandler}>\n            { props.isClicking ? 'ðŸ˜²' : getStatusEmoji(props.status) }\n        </button>\n    );\n}\n","import { useCallback, useRef, useState } from \"react\";\n\nfunction useLongPress (\n    onLongPress,\n    onClick,\n    { shouldPreventDefault = true, delay = 300 } = {}\n) {\n  \n    const [longPressTriggered, setLongPressTriggered] = useState(false);\n    const timeout = useRef();\n    const target = useRef();\n\n    const start = useCallback(\n        event => {\n        if (shouldPreventDefault && event.target) {\n            event.target.addEventListener(\"touchend\", preventDefault, {\n            passive: false\n            });\n            target.current = event.target;\n        }\n        timeout.current = setTimeout(() => {\n            onLongPress(event);\n            setLongPressTriggered(true);\n        }, delay);\n        },\n        [onLongPress, delay, shouldPreventDefault]\n    );\n\n    const clear = useCallback(\n        (event, shouldTriggerClick = true) => {\n        timeout.current && clearTimeout(timeout.current);\n        shouldTriggerClick && !longPressTriggered && onClick();\n        setLongPressTriggered(false);\n        if (shouldPreventDefault && target.current) {\n            target.current.removeEventListener(\"touchend\", preventDefault);\n        }\n        },\n        [shouldPreventDefault, onClick, longPressTriggered]\n    );\n\n    return {\n        onClick: e => clear(e),\n        onContextMenu: e => {\n            e.preventDefault();\n            onLongPress();\n        },\n        onTouchStart: e => start(e),\n        onTouchEnd: e => clear(e)\n    };\n};\n\nconst isTouchEvent = event => {\n    return \"touches\" in event;\n};\n\nconst preventDefault = event => {\n    if (!isTouchEvent(event)) return;\n\n    if (event.touches.length < 2 && event.preventDefault) {\n        event.preventDefault();\n    }\n};\n\nexport default useLongPress;\n","import React from 'react';\nimport useLongPress from \"../hooks/useLongPress\";\n\nexport function Cell(props) {\n    const cell = props.data.isCovered ? 'cell' : 'uncovered-cell';\n    const number = !props.data.isCovered && !props.isMine ? `cell-${props.data.neighboringMines}` : '';\n    const mine = !props.data.isCovered && props.isMine ? 'cell-mine' : '';\n    const content = props.data.isCovered ?\n        (props.data.flagged ? 'ðŸš©' : '') : (props.data.isMine ? 'ðŸ’£' : props.data.neighboringMines > 0 ? props.data.neighboringMines : '');\n    const clickedMine = props.data.clickedMine ? 'clicked-mine' : ''\n\n    const callbacks = useLongPress(\n        () => props.handleRightClick(props.data),\n        () => props.handleLeftClick(props.data)\n    )\n    \n    return (\n        <button className={`${cell} ${number} ${mine} ${clickedMine}`}\n            {...callbacks}>\n            \n            { content}\n\n        </button>\n    );\n}\n\nexport default Cell;\n","import React, { useState } from 'react';\nimport { Cell } from './Cell';\nimport { gameStatuses } from '../constants';\n\n\nexport function MinesweeperGrid(props) {\n    const [grid, setGrid] = useState(props.grid);\n    const [refresh, setRefresh] = useState(props.refresh);\n\n    if(refresh !== props.refresh) {\n        setRefresh(props.refresh);\n        setGrid(props.grid);\n    }\n\n    function handleRightClick(cell) {\n        props.cellGotClicked();\n\n        const [x, y] = [cell.x, cell.y];\n\n        if (!grid[x][y].isCovered || props.gameOver)\n            return;\n\n        const newGrid = grid.map(r => r.map(c => ({...c})));\n\n        newGrid[x][y].flagged = !newGrid[x][y].flagged;\n        \n        if(hasWon(newGrid)) {\n            props.setGameEnd(gameStatuses.won);\n        }\n\n        setGrid(newGrid);\n        props.cellGotFlagged(newGrid[x][y].flagged);\n    }\n\n    const hasWon = (grid) => grid.reduce((a, r) => a && r.reduce((a, c) => a && (c.isMine || !c.isCovered), true), true);\n\n    function handleLeftClick(cell) {\n        const [x, y] = [cell.x, cell.y];\n        props.cellGotClicked();\n\n        if (!grid[x][y].isCovered || grid[x][y].flagged || props.gameOver)\n            return;\n\n        if (grid[x][y].isMine) {\n            const newGrid = grid.map(r => r.map(c => ({\n                ...c,\n                isCovered: c.isMine ? false : c.isCovered\n            })));\n            newGrid[x][y].clickedMine = true;\n\n            setGrid(newGrid);\n            props.setGameEnd(gameStatuses.lost);\n        }\n        else  {\n            const newGrid = grid.map(r => r.map(c => ({\n                ...c\n            })));\n            newGrid[x][y].isCovered = false;\n            \n            if (grid[x][y].neighboringMines === 0) {\n                uncoverEmptyGrid(newGrid, cell);\n            }\n            else {\n                setGrid(newGrid);\n            }\n\n            if(hasWon(newGrid)) {\n                const flagsSetGrid = newGrid.map(r => r.map(c => ({\n                    ...c,\n                    flagged: c.isMine\n                })));\n                \n                setGrid(flagsSetGrid);\n                props.setGameEnd(gameStatuses.won);\n            }\n        }\n    }\n\n    // BFS\n    function uncoverEmptyGrid(grid, cell) {\n        const queue = [[cell.x, cell.y]];\n        let k = 0;\n        const length = grid.length;\n        const width = grid[0].length;\n\n        while (queue.length > 0) {\n            const n = queue.length;\n            for (let l = 0; l < n; l++) {\n                const [x, y] = queue.shift();\n\n                for (let i = Math.max(0, x - 1); i < Math.min(length, x + 2); ++i) {\n                    for (let j = Math.max(0, y - 1); j < Math.min(width, y + 2); ++j) {\n                        if (!grid[i][j].isMine && grid[i][j].isCovered && !grid[i][j].flagged) {\n                            grid[i][j].isCovered = false;\n                            if(grid[i][j].neighboringMines === 0) {\n                                queue.push([i, j]);\n                            }\n                        }\n                    }\n                }\n            }\n\n            // update after each breadth search cycle for animation\n            setTimeout((newGrid) => {\n                setGrid(newGrid);\n            }, k++ * 50, grid);\n        }\n    }\n\n    return (\n        grid.map((r, i) => <div key={i} className=\"row\">\n            {r.map((c, j) => <Cell\n                key={j}\n                data={c}\n                handleLeftClick={handleLeftClick}\n                handleRightClick={handleRightClick} />)}\n        </div>\n        )\n    );\n}\n","export function getNewGrid(length, width, minesCount) {\n\n    function getNewCells(length, width) {\n        let grid = [];\n        for (var i = 0; i < length; i++) {\n            grid[i] = [];\n            for (var j = 0; j < width; j++) {\n                grid[i][j] = {\n                    isMine: false\n                };\n            }\n        }\n\n        return grid;\n    }\n\n    function addMines(grid, minesCount) {\n        for (var i = 0; i < grid.length && minesCount; ++i) {\n            for (var j = 0; j < grid[i].length && minesCount; ++j, --minesCount) {\n                grid[i][j] = {\n                    isMine: true\n                };\n            }\n        }\n\n        return grid;\n    }\n\n    function randomize(grid) {\n        const n = grid.length;\n        const m = grid[0].length;\n        for (let i = 0; i < n; ++i) {\n            for (let j = 0; j < m; ++j) {\n                const rand = Math.floor(Math.random() * n * m);\n                const i1 = Math.floor(rand / m);\n                const j1 = rand % m;\n                [grid[i][j], grid[i1][j1]] = [grid[i1][j1], grid[i][j]];\n            }\n        }\n\n        return grid;\n    }\n\n    function setneighboringMines(mines) {\n\n        function calcNneighboringMines(x, y) {\n            var count = 0;\n\n            for (var i = Math.max(0, x - 1); i < Math.min(mines.length, x + 2); ++i) {\n                for (var j = Math.max(0, y - 1); j < Math.min(mines[i].length, y + 2); ++j) {\n                    if (mines[i][j].isMine) {\n                        count++;\n                    }\n                }\n            }\n\n            return count;\n        }\n\n        for (var i = 0; i < mines.length; ++i) {\n            for (var j = 0; j < mines[i].length; ++j) {\n                mines[i][j].neighboringMines = calcNneighboringMines(i, j);\n            }\n        }\n\n        return mines;\n    }\n\n    return setneighboringMines(randomize(addMines(getNewCells(length, width), minesCount)))\n        .map((r, i) => r.map((c, j) => ({\n            isCovered: true,\n            isMine: c.isMine,\n            neighboringMines: c.neighboringMines,\n            x: i,\n            y: j,\n        })));\n}\n","import { useState, useEffect } from 'react';\n\nexport function useTimer(isActive, reset) {\n    const [timer, setTimer] = useState(0);\n\n    useEffect(() => {\n        let interval = null;\n        if (isActive && !interval) {\n            interval = setTimeout(() => {\n                setTimer(timer => timer + 1);\n            }, 1000);\n        } else if (interval) {\n            clearTimeout(interval);\n        }\n\n        if (reset) {\n            setTimer(0);\n        }\n\n        return () => clearTimeout(interval);\n    }, [timer, isActive, reset]);\n\n    return timer;\n}\n","import React, { useEffect, useState } from 'react';\nimport { Scoreboard } from './Scoreboard';\nimport './Cell.component.css';\nimport './Minesweeper.component.css';\nimport { MinesweeperGrid } from './MinesweeperGrid';\nimport { getNewGrid } from './getNewGrid';\nimport { gameStatuses, levels } from '../constants';\nimport { useTimer } from '../hooks/useTimer';\n\n\nfunction Minesweeper() {\n    const [level, setLevel] = useState(levels[0]);\n\n    const [minesLeft, setMinesLeft] = useState(level.minesCount);\n    const [gameStatus, setGameStatus] = useState(gameStatuses.notStarted);\n    const [grid, setGrid] = useState(getNewGrid(level.height, level.width, level.minesCount));\n    const [refresh, setRefresh] = useState(false);\n    const [isClicking, setIsClicking] = useState(false);\n\n    const timer = useTimer(gameStatus === gameStatuses.running, gameStatus === gameStatuses.notStarted);\n\n    useEffect(reset, [level] );\n\n    function reset() {\n        setGameStatus(gameStatuses.notStarted);\n        setMinesLeft(level.minesCount);\n        setGrid(getNewGrid(level.height, level.width, level.minesCount));\n        setRefresh(refresh => !refresh);\n    }\n    \n    \n    const isGameOver = () => gameStatus === gameStatuses.won || gameStatus === gameStatuses.lost;\n\n    function cellGotFlagged(flagged) {\n        if(flagged) {\n            setMinesLeft(minesLeft-1);\n        }\n        else {\n            setMinesLeft(minesLeft+1);\n        }\n    }\n    \n    function cellGotClicked() {\n        if(gameStatus === gameStatuses.notStarted) {\n            setGameStatus(gameStatuses.running);\n        }\n    }\n\n    function setGameEnd(status) {\n        setGameStatus(status);\n        if (status === gameStatuses.won) {\n            setMinesLeft(0);\n        }\n    }\n\n    function levelChangeHandler(newLevelId) {\n        if(newLevelId !== level) {\n            setLevel(levels[newLevelId]);\n        }\n    }\n\n    return (\n        <div className=\"minesweeper\">\n            <Scoreboard \n                minesLeft={minesLeft}\n                timer={timer}\n                gameStatus={gameStatus}\n                level={level.id}\n                levelChangeHandler={levelChangeHandler}\n                isClicking={isClicking}\n                resetHandler={reset} />\n            <div className=\"grid\" onMouseDown={() => setIsClicking(true)} onMouseUp={() => setIsClicking(false)} onMouseLeave={() => setIsClicking(false)}>\n                <MinesweeperGrid\n                    refresh={refresh}\n                    grid={grid}\n                    gameOver={isGameOver()}\n                    cellGotFlagged={cellGotFlagged}\n                    cellGotClicked={cellGotClicked}\n                    setGameEnd={setGameEnd} />\n            </div>\n        </div>\n    );\n}\n\nexport default Minesweeper;\n\n"],"names":["gameStatuses","notStarted","running","won","lost","levels","id","text","height","width","minesCount","DigitalCounter","props","str","value","padStart","Scoreboard","minesLeft","e","levelChangeHandler","target","level","map","l","gameStatus","resetHandler","isClicking","timer","GameStatus","getStatusEmoji","status","onClickHandler","useLongPress","onLongPress","onClick","shouldPreventDefault","delay","longPressTriggered","setLongPressTriggered","useState","timeout","useRef","start","useCallback","event","addEventListener","preventDefault","passive","current","setTimeout","clear","shouldTriggerClick","clearTimeout","removeEventListener","onContextMenu","onTouchStart","onTouchEnd","isTouchEvent","touches","length","Cell","cell","data","isCovered","number","isMine","neighboringMines","mine","content","flagged","clickedMine","callbacks","handleRightClick","handleLeftClick","MinesweeperGrid","grid","setGrid","refresh","setRefresh","cellGotClicked","x","y","gameOver","newGrid","r","c","hasWon","setGameEnd","cellGotFlagged","reduce","a","uncoverEmptyGrid","flagsSetGrid","queue","k","n","shift","i","Math","max","min","j","push","getNewGrid","getNewCells","addMines","randomize","m","rand","floor","random","i1","j1","setneighboringMines","mines","calcNneighboringMines","count","useTimer","isActive","reset","setTimer","useEffect","interval","Minesweeper","setLevel","setMinesLeft","setGameStatus","setIsClicking","isGameOver","newLevelId"],"mappings":"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"}